# üöÄ ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ CI/CD ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Node.js ‡∏î‡πâ‡∏ß‡∏¢ GitHub Actions, Docker, ‡πÅ‡∏•‡∏∞ Watchtower

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö CI/CD ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Node.js ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£ Push ‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏õ‡∏¢‡∏±‡∏á Branch `main` ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ Build Docker Image ‡πÅ‡∏•‡∏∞ Deploy ‡∏Ç‡∏∂‡πâ‡∏ô Server (Droplet) ‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**Flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:**

1.  **Trigger:** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£ Push ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏∂‡πâ‡∏ô Branch `main`
2.  **CI (GitHub Actions):** Build Docker Image ‡πÅ‡∏•‡∏∞ Push ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà Docker Hub
3.  **CD (Droplet):** Watchtower ‡∏ö‡∏ô Server ‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö Image ‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ Pull ‡∏°‡∏≤ Deploy ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ:**

  * **üîí ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏π‡∏á:** ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö SSH Key ‡∏Ç‡∏≠‡∏á Server ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô GitHub
  * **‚ú® ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô:** Workflow ‡πÑ‡∏°‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏¢‡πâ‡∏≤‡∏¢ Server ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å
  * **‚öôÔ∏è ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö:** ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î

-----

## üìã ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß (Pre-requisites)

‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏ó‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏™‡∏¥‡πà‡∏á‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°:

1.  **GitHub Repository:** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô
2.  **Docker Hub Account:** ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ó‡∏µ‡πà [hub.docker.com](https://hub.docker.com)
      * ‡∏™‡∏£‡πâ‡∏≤‡∏á **Access Token** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡πÉ‡∏ô GitHub Actions (‡πÑ‡∏õ‡∏ó‡∏µ‡πà `Account Settings` \> `Security` \> `New Access Token`)
3.  **Server (DigitalOcean Droplet):** Server ‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker ‡πÅ‡∏•‡∏∞ Docker Compose ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß
4.  **‡πÑ‡∏ü‡∏•‡πå `firebase-services.json`:** ‡πÑ‡∏ü‡∏•‡πå Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Firebase

-----

## üì¶ ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

### 1\. ‡∏™‡∏£‡πâ‡∏≤‡∏á `Dockerfile`

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ä‡∏∑‡πà‡∏≠ `Dockerfile` ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà Root ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå ‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:

```dockerfile
# Stage 1: Build the application
FROM node:20-alpine as builder
WORKDIR /usr/src/movemate-api

COPY package.json package-lock.json ./
# COPY ./patches ./patches ./ # Uncomment if you use patches

RUN npm install --frozen-lockfile --unsafe-perm

COPY . .

# RUN npx patch-package # Uncomment if you use patches
RUN npm run build

# Stage 2: Production environment
FROM node:20-alpine
WORKDIR /usr/src/movemate-api

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö uploads ‡πÅ‡∏•‡∏∞ generated files
RUN mkdir -p uploads generated/invoice generated/receipt generated/whtcert generated/adjustmentnote generated/report/admin/booking generated/report/admin/customer generated/report/admin/driver generated/report/admin/debtor generated/report/admin/creditor generated/report/customer/booking

COPY package.json package-lock.json firebase-services.json ./
COPY --from=builder /usr/src/movemate-api/node_modules ./node_modules
COPY --from=builder /usr/src/movemate-api/dist ./dist

EXPOSE 4000
CMD ["node", "dist/app.js"]
```

### 2\. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô `.gitignore`

‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏´‡∏•‡∏∏‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏ö‡∏ô GitHub ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.gitignore` ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô:

```
# .gitignore

# Environment files
.env
.env.*
!.env.default

# Firebase
firebase-services.json

# Dependencies
node_modules
```

-----

## üîê ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏î‡πâ‡∏ß‡∏¢ GitHub Secrets

‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡πà‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÄ‡∏ä‡πà‡∏ô Key, Token, Password) ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô **GitHub Secrets**

### 1\. ‡πÅ‡∏õ‡∏•‡∏á `firebase-services.json` ‡πÄ‡∏õ‡πá‡∏ô Base64

‡πÄ‡∏õ‡∏¥‡∏î Terminal/CMD ‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå `firebase-services.json` ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:

  * **macOS / Linux:** `base64 -w 0 --input firebase-services.json`
  * **Windows (CMD):** `certutil -encode -f firebase-services.json firebase-services.b64` (‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `firebase-services.b64` ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤)

**‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÜ ‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ**

### 2\. ‡∏™‡∏£‡πâ‡∏≤‡∏á GitHub Secrets

‡πÑ‡∏õ‡∏ó‡∏µ‡πà `Repository > Settings > Secrets and variables > Actions` ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏•‡∏¥‡∏Å `New repository secret` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Secrets ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:

  * **`DOCKERHUB_USERNAME`**: ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ Docker Hub ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô
  * **`DOCKERHUB_TOKEN`**: Access Token ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏≤‡∏Å Docker Hub
  * **`FIREBASE_SERVICES_JSON_B64`**: ‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Base64 ‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß

-----

## ü§ñ ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏™‡∏£‡πâ‡∏≤‡∏á GitHub Actions Workflow

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `.github/workflows/` ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà‡∏ä‡∏∑‡πà‡∏≠ `deploy.yml`

**‡πÑ‡∏ü‡∏•‡πå:** `.github/workflows/deploy.yml`

```yaml
name: Build and Push Docker Image

on:
  push:
    branches:
      - main # ‡∏´‡∏£‡∏∑‡∏≠ master

jobs:
  build-and-push:
    runs-on: ubuntu-latest
    steps:
      - name: üöö Check out the repo
        uses: actions/checkout@v4

      - name: üîê Create Firebase service account file
        run: echo "${{ secrets.FIREBASE_SERVICES_JSON_B64 }}" | base64 --decode > firebase-services.json

      - name: üê≥ Login to Docker Hub
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}

      - name: üè∑Ô∏è Extract metadata for Docker
        id: meta
        uses: docker/metadata-action@v5
        with:
          images: ${{ secrets.DOCKERHUB_USERNAME }}/movemate-api # ‚ùó ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô 'movemate-api' ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠ repo ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô
          tags: |
            type=sha,prefix=,format=short
            type=raw,value=latest

      - name: üê≥ Build and push Docker image
        uses: docker/build-push-action@v5
        with:
          context: .
          file: ./Dockerfile
          push: true
          tags: ${{ steps.meta.outputs.tags }}
          labels: ${{ steps.meta.outputs.labels }}
```

-----

## üñ•Ô∏è ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Server (Droplet) - *‡∏ó‡∏≥‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß*

### 1\. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á Server ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô SSH

### 2\. ‡∏™‡∏£‡πâ‡∏≤‡∏á Directory ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```bash
mkdir -p /root/movemate-api/uploads
mkdir -p /root/movemate-api/generated
cd /root/movemate-api
```

### 3\. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production

‡πÉ‡∏ä‡πâ `nano` ‡∏´‡∏£‡∏∑‡∏≠ `vim` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤ Environment Variables ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå ‡πÄ‡∏ä‡πà‡∏ô:

```env
# /root/movemate-api/.env

NODE_ENV=production
PORT=4000
MONGODB_URI="mongodb://your_connection_string"
# ... ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏≠‡∏∑‡πà‡∏ô‡πÜ
```

### 4\. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `docker-compose.yml`

‡πÉ‡∏ä‡πâ `nano` ‡∏´‡∏£‡∏∑‡∏≠ `vim` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `docker-compose.yml` ‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ:

```yaml
version: '3.8'

services:
  # ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤
  movemate-api:
    image: ${{ secrets.DOCKERHUB_USERNAME }}/movemate-api:latest # ‚ùó‚ùó **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏õ‡πá‡∏ô Docker Hub Username ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô
    container_name: movemate-api-container
    restart: always
    ports:
      - "4000:4000" # <Port ‡∏ö‡∏ô Server>:<Port ‡πÉ‡∏ô Container>
    env_file:
      - ./.env # ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ env ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå .env
    volumes:
      # ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ö‡∏ô Server ‡∏Å‡∏±‡∏ö‡πÉ‡∏ô Container ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏≤‡∏ß‡∏£
      - ./uploads:/usr/src/movemate-api/uploads
      - ./generated:/usr/src/movemate-api/generated
    labels:
      # Label ‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å! ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Watchtower ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Container ‡∏ô‡∏µ‡πâ
      - "com.centurylinklabs.watchtower.enable=true"

  # ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Watchtower
  watchtower:
    image: containrrr/watchtower
    container_name: watchtower
    restart: always
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    command: --interval 60 # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Image ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡πÜ 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    labels:
      - "com.centurylinklabs.watchtower.enable=true"
```

**‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `image:` ‡πÉ‡∏ô `docker-compose.yml` ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠ Docker Hub ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô

### 5\. ‡∏£‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß:

```bash
docker-compose up -d
```

‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏î‡∏∂‡∏á Image ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á `movemate-api` ‡πÅ‡∏•‡∏∞ `watchtower` ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á

-----

## üéâ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô\!

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏£‡∏∞‡∏ö‡∏ö CI/CD ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß\!

  * ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏ô Push ‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏õ‡∏¢‡∏±‡∏á Branch `main`...
  * GitHub Actions ‡∏à‡∏∞ Build ‡πÅ‡∏•‡∏∞ Push Image ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡∏¢‡∏±‡∏á Docker Hub
  * ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `interval`), Watchtower ‡∏ö‡∏ô Server ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö, ‡∏î‡∏∂‡∏á Image ‡πÉ‡∏´‡∏°‡πà, ‡πÅ‡∏•‡∏∞ Restart Container `movemate-api` ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

-----

## üîß ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤

### ‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≤‡∏¢ Server

1.  ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Docker ‡πÅ‡∏•‡∏∞ Docker Compose ‡∏ö‡∏ô Server ‡πÉ‡∏´‡∏°‡πà
2.  ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `/root/movemate-api` ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ó‡∏µ‡πà‡∏°‡∏µ `docker-compose.yml`, `.env`, `uploads`, `generated`) ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Server ‡πÉ‡∏´‡∏°‡πà
3.  ‡∏£‡∏±‡∏ô `docker-compose up -d`
4.  **‡∏à‡∏ö\! ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô GitHub ‡πÄ‡∏•‡∏¢**

### ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Owner (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Docker Hub Account)

1.  ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà `Repository > Settings > Secrets and variables > Actions`
2.  ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤ `DOCKERHUB_USERNAME` ‡πÅ‡∏•‡∏∞ `DOCKERHUB_TOKEN`
3.  ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `image:` ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `docker-compose.yml` ‡∏ö‡∏ô Server ‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô
4.  ‡∏£‡∏±‡∏ô `docker-compose up -d` ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ö‡∏ô Server
5.  **‡∏à‡∏ö\!**